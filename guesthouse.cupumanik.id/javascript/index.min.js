function logout(){$("#warningcontainer").html('<strong>Mengeluarkan Anda dari administrator... </strong><img src="../../assets/ajax-loader.gif" />');var a=new XMLHttpRequest;a.open("POST",$url+"/functions/logout.php",!0),a.onload=function(t){4==a.readyState&&200==a.status&&"1"==a.responseText&&($("#loginbox").modal("show"),$("#login").show(),$("#logout").hide(),$("#warningcontainer").hide(),$("#admin-content").hide())};var t=new FormData;a.send(t),$("#warningcontainer").show()}function addCategory(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/addCategory.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status&&1==a.responseText?(refreshCategories(),$("#newcategorydiv").fadeOut("fast"),$("#addcatform").trigger("reset")):($("#warningcontainer").html("<strong>Terjadi kesalahan: </strong>Gagal menyimpan kategori!"),$("#warningcontainer").show()))};var t=new FormData;t.append("catname",$("#newcategoryTb").val()),$("#warningcontainer").html('<strong>Menyimpan kategori... </strong><img src="../../assets/ajax-loader.gif" />'),$("#warningcontainer").show(),a.send(t)}function getCategoriesDropDown(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/printCategoriesDd.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?($options=a.responseText,$("#selectCategory").html($options),$("#catparam").html($options),$("#warningcontainer").hide()):($("#warningcontainer").html("<strong>Terjadi kesalahan: </strong>Gagal memuat kategori!"),$("#warningcontainer").show()))};var t=new FormData;$("#warningcontainer").html('<strong>Memuat kategori... </strong><img src="../../assets/ajax-loader.gif" />'),$("#warningcontainer").show(),a.send(t)}function detailOrder(a){var t=new XMLHttpRequest;t.open("POST",$url+"/functions/getOrderDetailById.php",!0),t.onload=function(a){if(4==t.readyState)if(200==t.status){var e=JSON.parse(t.responseText);if($("#namaPemesanLabel").text(e.custname),$("#alamatLabel").text(e.address),$("#phoneLabel").text(e.phone),$("#emailLabel").text(e.email),$("#informasiLabel").text(e.information),$("#tanggalLabel").text(e.date),e.isprocessed===!0?($("#statusLabel").html('<span class="glyphicon glyphicon-ok">&nbsp;</span>Sudah Diproses'),$("#tandaiBtn").attr("disabled","true"),$("#tandaiBtn").html("Sudah Diproses"),$("#tandaiBtn").attr("class","btn btn-success")):($("#statusLabel").html("Belum Diproses"),$("#tandaiBtn").removeAttr("disabled"),$("#tandaiBtn").html('<span class="glyphicon glyphicon-ok">&nbsp;</span>Tandai Sudah Diproses'),$("#tandaiBtn").attr("class","btn btn-primary"),$("#tandaiBtn").attr("onclick","markFinished("+e.id+")")),$productcols="",$productcols+='<table class="table table-hover"><tr><th>No.</th><th>&nbsp;</th><th>Nama Produk</th><th>Harga Satuan</th><th>Jumlah</th><th>Harga Total</th></tr>',e.products.length>0){$("#productdetails").html(""),$subtotal=0;for(var n=0;n<e.products.length;n++)$totalprice=0,$productcols+="<tr>",$productcols+="<td>"+(n+1)+"</td>",$productcols+='<td><img src="../../'+e.products[n].imageurl+'" style="max-width: 100px;"></td>',$productcols+="<td>"+e.products[n].productname+"</td>",$productcols+="<td>"+accounting.formatMoney(e.products[n].price,"IDR",".",",")+"</td>",$productcols+="<td>"+e.products[n].amount+"</td>",$totalprice+=e.products[n].price*e.products[n].amount,$subtotal+=$totalprice,$productcols+="<td>"+accounting.formatMoney($totalprice,"IDR",".",",")+"</td>",$productcols+="</tr>";$productcols+="<tr>",e.randomnum||(e.randomnum=0),$productcols+='<td colspan="5"><label class="pull-right">Total Pemesanan + angka unik <span style="color:red;">'+e.randomnum+"</span>:</label></td>",$productcols+="<td>"+accounting.formatMoney($subtotal+e.randomnum,"IDR",".",",")+"</td>",$productcols+="</tr>"}$productcols+="</table>",$("#productdetails").html($productcols),$("#orderdetailstitle").html("Detail Pemesanan oleh: "+e.custname),$("#orderdetailsbox").modal({backdrop:"static",keyboard:!1}),$("#orderdetailsbox").modal("show"),$("#warningcontainer").hide()}else $("#warningcontainer").html("<strong>Terjadi kesalahan: </strong>Gagal membuka halaman detail!"),$("#warningcontainer").show()};var e=new FormData;e.append("id",a),$("#warningcontainer").html('<strong>Membuka detail pemesanan... </strong><img src="../../assets/ajax-loader.gif" />'),$("#warningcontainer").show(),t.send(e)}function detailProduct(a){var t=new XMLHttpRequest;t.open("POST",$url+"/functions/getProductByIdJson.php",!0),t.onload=function(a){if(4==t.readyState)if(200==t.status){var e=JSON.parse(t.responseText);$("select#selectCategory option").each(function(){this.selected=this.value==e.catid}),$("#formdetails").trigger("reset"),$("#namaProdukTb").val(e.title),$("#deskripsiTb").val(e.description),$("#jumlahStokTb").val(e.stock),$("#hargaSatuanTb").val(e.price),$("#uploadedimg").attr("src","../../"+e.imageurl),$("#tempid").val(e.id),$("#tambahProdukLabel").html("Ubah Produk: "+e.title),$("#detailsbox").modal({backdrop:"static",keyboard:!1}),getCategoriesDropDown(),$("#detailsbox").modal("show"),$("#warningcontainer").hide()}else $("#warningcontainer").html("<strong>Terjadi kesalahan: </strong>Gagal membuka halaman detail!"),$("#warningcontainer").show()};var e=new FormData;e.append("id",a),$("#warningcontainer").html('<strong>Membuka dialog detail... </strong><img src="../../assets/ajax-loader.gif" />'),$("#warningcontainer").show(),t.send(e)}function removeProduct(a,t){if(confirm("Yakin akan menghapus produk "+t+" ?")){var e=new XMLHttpRequest;e.open("POST",$url+"/functions/removeProduct.php",!0),e.onload=function(a){4==e.readyState&&(200==e.status?1==e.responseText?refreshProducts():alert("Gagal menghapus produk!"):alert(e.statusText))};var n=new FormData;n.append("id",a),e.send(n),$("#warningcontainer").html('<strong>Menghapus produk... </strong><img src="../../assets/ajax-loader.gif" />'),$("#warningcontainer").show()}}function refreshProducts(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/getProducts.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?($("#productstable").html(a.responseText),$("#warningcontainer").hide()):alert(a.statusText))};var t=new FormData;a.send(t),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Memperbarui daftar produk... </strong><img src="../../assets/ajax-loader.gif" />')}function markFinished(a){if(confirm("Anda yakin pemesanan ini sudah diproses dan dilakukan?")){var t=new XMLHttpRequest;t.open("POST",$url+"/functions/updateOrder.php",!0),t.onload=function(a){4==t.readyState&&(200==t.status?1==t.responseText?(refreshFilteredOrders(),$("#warningcontainer").hide(),$("#orderdetailsbox").modal("hide")):($("#warningcontainer").html("<strong>Terjadi kesalahan dalam menandai pemesanan.</strong>"),$("#warningcontainer").show()):alert(t.statusText))};var e=new FormData;e.append("orderid",a),e.append("isprocessed",1),t.send(e),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Menandai pemesanan sudah dilakukan... </strong><img src="../../assets/ajax-loader.gif" />')}}function changeCategory(a){$catname=$("#catname_"+a).html(),$textbox='<input type="textbox" id="changecatTb" class="form-control" value="'+$catname+'"></input>',$button='<button onclick="updateCategory('+a+')" class="btn">Simpan</button>',$("#catname_"+a).html(""),$("#buttoncat_"+a).html(""),$("#catname_"+a).html($textbox),$("#buttoncat_"+a).html($button)}function updateCategory(a){var t=new XMLHttpRequest;t.open("POST",$url+"/functions/updateCategory.php",!0),t.onload=function(a){4==t.readyState&&(200==t.status?1==t.responseText?(refreshCategories(),$("#warningcontainer").hide()):($("#warningcontainer").html("<strong>Terjadi kesalahan dalam memperbarui data kategori.</strong>"),$("#warningcontainer").show()):alert(t.statusText))};var e=new FormData;e.append("catid",a),e.append("categoryname",$("#changecatTb").val()),t.send(e),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Mengubah data kategori... </strong><img src="../../assets/ajax-loader.gif" />')}function changePassword(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/changePassword.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?1==a.responseText?($("#passwordLamaTb").val(""),$("#passwordBaruTb").val(""),$("#ulangPasswordBaruTb").val(""),logout(),$("#warningcontainer").hide()):($("#warningcontainer").html("<strong>Password lama Anda mungkin tidak sama dengan password saat ini.</strong>"),$("#warningcontainer").show()):alert(a.statusText))};var t=new FormData;t.append("old",$("#passwordLamaTb").val()),t.append("new",$("#passwordBaruTb").val()),a.send(t),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Mengganti password administrator... </strong><img src="../../assets/ajax-loader.gif" />')}function removeCategory(a){if(confirm("Apakah Anda yakin akan menghapus data kategori ini?")){var t=new XMLHttpRequest;t.open("POST",$url+"/functions/removeCategory.php",!0),t.onload=function(a){4==t.readyState&&(200==t.status?1==t.responseText?(refreshCategories(),$("#warningcontainer").hide()):($("#warningcontainer").html("<strong>Terjadi kesalahan dalam menghapus data kategori.</strong>Kategori tidak dapat dihapus jika masih ada produk di dalam kategori tersebut."),$("#warningcontainer").show()):alert(t.statusText))};var e=new FormData;e.append("catid",a),t.send(e),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Menghapus data kategori... </strong><img src="../../assets/ajax-loader.gif" />')}}function removeOrder(a,t){if(confirm("Apakah Anda yakin akan menghapus pemesanan dari "+t+"? Seluruh daftar produk beserta jumlah pemesanan akan terhapus. Data yang terhapus TIDAK DAPAT dilihat kembali.")){var e=new XMLHttpRequest;e.open("POST",$url+"/functions/removeOrder.php",!0),e.onload=function(a){4==e.readyState&&(200==e.status?1==e.responseText?(refreshFilteredOrders(),$("#warningcontainer").hide()):($("#warningcontainer").html("<strong>Terjadi kesalahan dalam menghapus data kategori.</strong>Kategori tidak dapat dihapus jika masih ada produk di dalam kategori tersebut."),$("#warningcontainer").show()):alert(e.statusText))};var n=new FormData;n.append("id",a),e.send(n),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Menghapus data pemesanan... </strong><img src="../../assets/ajax-loader.gif" />')}}function refreshCategories(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/getCategories.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?($("#tablecat").html(a.responseText),$("#warningcontainer").hide()):alert(a.statusText))};var t=new FormData;a.send(t),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Memperbarui daftar kategori... </strong><img src="../../assets/ajax-loader.gif" />')}function refreshFilteredProducts(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/getFilteredProducts.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?($("#productstable").html(a.responseText),$("#warningcontainer").hide()):alert(a.statusText))};var t=new FormData;t.append("title",$("#cariTb").val()),t.append("sort",$("#sortParam option:selected").val()),a.send(t),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Memperbarui daftar produk... </strong><img src="../../assets/ajax-loader.gif" />')}function refreshFilteredOrders(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/getOrders.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?($("#orderstable").html(a.responseText),$("#warningcontainer").hide()):alert(a.statusText))};var t=new FormData;t.append("sort",$("#sortOrderParam option:selected").val()),t.append("mulai",$("#mulaiTb").val()),t.append("akhir",$("#akhirTb").val()),a.send(t),$("#warningcontainer").show(),$("#warningcontainer").html('<strong>Memperbarui daftar pemesanan... </strong><img src="../../assets/ajax-loader.gif" />')}$url="https://localhost",$(document).ready(function(){function a(){var a=new XMLHttpRequest;a.open("POST",$url+"/functions/checklogin.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status?($res=a.responseText,0==$res?($("#loginbox").modal("show"),$("#login").show(),$("#logout").hide(),$("#admin-content").hide()):($("#loginbox").modal("hide"),$("#login").hide(),$("#logout").show(),$("#admin-content").show())):($("#login").hide(),$("#logout").show()))};var t=new FormData;a.send(t)}$("#loginbox").modal({backdrop:"static",keyboard:!1}),$("#orderdetailsbox").modal({backdrop:"static",keyboard:!1}),$("#orderdetailsbox").modal("hide"),$("#alertdanger").hide(),$("#alertwarning").hide(),$("#detaildanger").hide(),$("#detailwait").hide(),$("#orderdanger").hide(),$("#orderwait").hide(),$("#alertsuccess").hide(),$("#alertwait").hide(),$("#login").hide(),$("#logout").hide(),$("#warningcontainer").hide(),$("#admin-content").hide(),$("#imagewarning").hide(),$("#newcategorydiv").hide(),a(),$("#mulaiTb").datepicker(),$("#mulaiTb").datepicker("option","showAnim","slideDown"),$("#mulaiTb").datepicker("option","dateFormat","yy/m/d"),$("#akhirTb").datepicker(),$("#akhirTb").datepicker("option","showAnim","slideDown"),$("#akhirTb").datepicker("option","dateFormat","yy/m/d"),$("#loginbtn").click(function(){$("#alertwait").show();var a=new XMLHttpRequest;a.open("POST",$url+"/functions/login.php",!0),a.onload=function(t){4==a.readyState&&(200==a.status&&"1"==a.responseText?($("#alertdanger").hide(),$("#alertsuccess").show(),$("#loginbox").modal("hide"),$("#login").hide(),$("#logout").show(),$("#admin-content").show()):($("#alertdanger").show(),$("#alertsuccess").hide(),$("#admin-content").hide())),$("#alertwait").hide()};var t=new FormData;t.append("user",$("#usernameTb").val()),t.append("pass",$("#passwordTb").val()),a.send(t)}),$("#login").click(function(){$("#loginbox").modal("toggle")}),$("#logout").click(function(){logout()}),$("#addproduct").click(function(){$("#formdetails").trigger("reset"),$("#namaProdukTb").val(""),$("#deskripsiTb").val(""),$("#jumlahStokTb").val(""),$("#hargaSatuanTb").val(""),$("#uploadedimg").removeAttr("src"),$("#tempid").val(null),$("#tambahProdukLabel").html("Tambah Produk"),$("#detailsbox").modal({backdrop:"static",keyboard:!1}),$("#detailsbox").modal("show"),getCategoriesDropDown()}),$("#uploadFile").change(function(){$("#imagewarning").hide();var a=this.files[0],t=a.type,e=["image/jpeg","image/jpg"];if(e.indexOf(t)>=0){var n=new FileReader;n.onload=function(a){$("#uploadedimg").attr("src",a.target.result)},n.readAsDataURL(this.files[0])}else $("#uploadedimg").removeAttr("src"),$("#imagewarning").show(),$("#imagewarning").html('<span class="glyphicon glyphicon-exclamation-sign"></span>&nbsp;Foto/gambar yang dimasukkan harus memiliki ekstensi JPEG/JPG')}),$("#loginform").on("submit",function(a){a.preventDefault()}),$("#changepassform").on("submit",function(a){$("#passwordBaruTb").val()===$("#ulangPasswordBaruTb").val()?changePassword():($("#warningcontainer").show(),$("#warningcontainer").html("<strong>Password baru yang Anda berikan tidak sama!</strong>")),a.preventDefault()}),$("#formdetails").on("submit",function(a){$namaproduk=$("#namaProdukTb").val(),$cat=$("#selectCategory option:selected").val(),$desc=$("#deskripsiTb").val(),$stock=$("#jumlahStokTb").val(),$price=$("#hargaSatuanTb").val();var t=new XMLHttpRequest,e=new FormData(this);$func="",""==$("#tempid").val()?$func=$url+"/functions/addProduct.php":($func=$url+"/functions/updateProduct.php",e.append("id",$("#tempid").val())),e.append("title",$namaproduk),e.append("desc",$desc),e.append("stock",$stock),e.append("categoryid",$cat),e.append("price",$price),t.open("POST",$func,!0),t.onload=function(a){4==t.readyState&&(200==t.status?($res=t.responseText,1==$res?(refreshFilteredProducts(),$("#detailsbox").modal("hide"),$("#detaildanger").hide()):(alert(t.responseText),$("#detaildanger").show(),$("#detailwarning").html("Menyimpan data atau mengunggah foto tidak dapat dilakukan."))):($("#detaildanger").show(),$("#detailwarning").html("Pengambilan data tidak dapat dilakukan. Hubungi administrator."))),$("#detailwait").hide()},$("#detailwait").show(),t.send(e),a.preventDefault()}),$("#productlink").click(function(){refreshProducts(),getCategoriesDropDown()}),$("#orderlink").click(function(){refreshFilteredOrders()}),$("#categorylink").click(function(){refreshCategories()}),$("#filter").on("submit",function(a){a.preventDefault(),refreshFilteredProducts()}),$("#sortParam").on("change",function(){refreshFilteredProducts()}),$("#sortOrderParam").on("change",function(){refreshFilteredOrders()}),$("#mulaiTb").on("change",function(){refreshFilteredOrders()}),$("#akhirTb").on("change",function(){refreshFilteredOrders()}),$("#addcategory").click(function(){$("#newcategorydiv").fadeIn("fast")}),$("#closeaddcat").click(function(){$("#newcategorydiv").fadeOut("fast")}),$("#addcatform").on("submit",function(a){addCategory(),a.preventDefault()})});